# 26. ES6 함수의 추가 기능

## 26.3 화살표 함수

### 26.3.3. this

this에 바인딩할 객체는 함수를 호출할 때 함수가 어떻게 호출되었는지에 따라 this에 바인딩할 객체가 동적으로 결정된다.
이때 일반 함수로서 호출되는 콜백함수일 때를 주의해야 한다.


일반함수로서 호출되는 모든 함수 내부의 this는 전역 객체를 가리킨다. 그리고 strict 모드가 암묵적으로 적용된다.
- 따라서 전역객체가 아니라 undefined가 바인딩 되므로 콜백 함수의 this에는 undefined가 바인딩된다.
- 콜백 함수의 this와 외부 함수의 this가 서로 다른 값을 가리키고 있을 때 발생하는 문제이다.

#### ES6 이전에 콜백 함수 내부의 this 문제를 해결하기 위해 사용한 방법
1. 내부 메서드를 호출한 객체를 가리키는 this를 회피시킨 후에 콜백함수 내부에서 사용한다.
2. Array.prototype.map의 두번째 인수로 add 메서드를 호출한 객체를 가리키는 this를 전달한다.
3. bind 메서드를 사용하여 객체를 가리키는 this를 바인딩한다.
- ES6에서 사용하는 방법 -> 화살표 함수 사용하기

#### Lexical this
화살표 함수는 함수 자체의 this 바인딩을 갖지 않는다. 따라서 화살표 함수 내에서 this를 참조하면 상위 스코프의 this를 그대로 참조한다.
화살표 함수를 제외한 모든 함수에는 this 바인딩이 반드시 존재하기 때문에 이를 사용해서 상위 스코프의 this를 바로 참조할 수 있다.

- 스코프 체인 상에서 가장 가까운 상위 함수 중에서 화살표 함수가 아닌 함수의 this를 참조한다.
- call,apply,bind를 사용해도 화살표 함수의 this를 교체할 수 없다.
- 호출한 객체가 아니라 상위 스코프를 가리키므로 메서드를 정의할 때는 화살표 함수로 정의하는 것은 바람직하지 않다.


### 26.3.4 super
화살표 함수는 함수 자체의 super 바인딩을 갖지 않기 때문에 this와 마찬가지로 상위 스코프의 super를 참조한다.
super는 내부 슬롯[[HomeObject]]를 갖는 ES6 메서드 내에서만 사용할 수 있는 키워드다.

### 26.3.5. arguments
화살표 함수는 함수 자체의 arguments 바인딩을 갖지 않는다. 마찬가지로 상위 스코프의 arguments를 참조한다.
화살표 함수에서는 arguments를 사용할 수 없다. 상위 스코프의 arguments를 참조할 수는 있지만 크게 유용하지는 않다.
그래서 가변 인자를 구하고 싶으면 rest 파라미터를 사용해야 한다.


---
## 26.4 Rest 파라미터

### 26.4.1 기본 문법
Rest : 매개변수의 이름 앞에 세개의 점을 붙여서 정의한 매개변수. 함수에 전달된 인수들의 목록을 배열로 전달받는다.
- rest 파라미터는 이름 그래도 먼더 선언된 매개변수에 할당된 인수의 나머지 인수로 구성되기 때문에 반드시 마지막 파라미터여야 한다.
- 단 하나만 선언할 수 있다.
- 함수 정의 시 선언한 매개변수를 나타내는 length 프로퍼티에 영향을 주지 않는다. (rest는 카운팅 안됨)

### 26.4.2 Rest 파라미터와 arguments 객체
arguments 객체는 배열이 아닌 유사 배열 객체이므로 배열 메서드를 사용하려면 객체를 배열로 변경해야하는 번거로움이 있었다.
ES6에서는 rest를 사용하여 가변 인자 함수의 인수 목록을 배열로 직접 전달받을 수 있다.


---
## 26.5 매개변수 기본값
인수가 전달되지 않은 매개변수의 값은 undefined이다. 이를 방치하면 좋지 않은 영향이 발생할 수 있다.
따라서 방어 코드가 필요한다 ES6에 도입된 매개변수 기본값을 사용하여 인수 체크 및 초기화를 간소화할 수 있다.

```js
function sum(x = 0, y = 0){
    return x + y;
}

console.log(sum(1)) // 1
```

- rest 파라미터에는 기본값을 지정할 수 없다.
- 기본값은 length 프로퍼티와 arguments 객체에 아무런 영향을 주지 않는다.