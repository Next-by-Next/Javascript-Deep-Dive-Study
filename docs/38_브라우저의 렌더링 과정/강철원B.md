**TIL(Today I learn) 기록일** : 2024. 01. 11


# 38 브라우저의 렌더링 과정 

## 4. CSS 파싱과 CSSOM 생성

렌더링 엔진은 HTML을 처음부터 한 줄씩 순차적으로 파싱하여 DOM을 생성해 나갑니다.   
렌더링 엔진은 DOM을 생성해 나가다가 CSS를 로드하는 link 태그나 style 태그를 만나면 DOM 생성을 일시 중단합니다.     
link 태그의 href 어트리뷰트에 지정된 CSS 파일을 서버에 요청하여 로드한 CSS 파일이나 style 태그 내의 CSS를 HTML과 동일한 파싱 과정(바이트 → 문자 → 토큰 → 노드 → CSSOM)을 거치며 해석하여 CSSOM을 생성합니다.    
이후 CSS 파싱을 완료하면 HTML 파싱이 중단된 지점부터 다시 HTML을 파싱하기 시작하여 DOM 생성을 재개합니다.   

```js
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="style.css" />
    <title>Title</title>
    ...
  </head>
</html>
```
렌더링 엔진은 meta 태그까지 HTML을 순차적으로 해석한 다음, link 태그를 만나면 DOM 생성을 일시 중단하고 link 태그의 href 어트리뷰트에 지정된 CSS 파일을 서버에 요청합니다.

## 5 렌더 트리 생성
 
 DOM과 CSSOM은 렌더링을 위해 렌더 트리로 결합됩니다.

 렌더 트리
  - 렌더링을 위한 트리 구조의 자료구조
  - 브라우저 화면에 렌더링되는 노드만으로 구성
  - 각 HTML 요소의 레이아웃(위치와 크기)을 계산하는데 사용되며, 브라우저 화면에 픽섹을 렌더링하는 페인팅 처리에 입력됩니다.
  - 리렌더링은 성능에 영향 많이 주므로 주의 필요

## 6 자바스크립트 파싱과 실행
  
자바스크립트 파싱과 실행은 브라우저의 렌더링 엔진이 아닌 자바스크립트 엔진이 처리합니다.
렌더링 엔진으로부터 제어권을 넘겨받은 자바스크립트 엔진은 자바스크립트 코드를 파싱하기 시작합니다.    
자바스크립트 엔진은 자바스크립트를 해석하여 AST(추상적 구문 트리)를 생성한다. AST를 기반으로 인터프리터가 실행할 수 있는 중간 코드인 바이트코드를 생성하여 실행합니다.    

### 토크나이징(tokenizing)
단순한 문자열인 자바스크립트 소스코드를 어휘 분석하여 문법적 의미를 갖는 코드의 최소 단위인 토큰들로 분해합니다.

### 파싱(parsing)
토큰들의 집합을 구문 분석하여 AST를 생성합니다.

### 바이트코드 생성과 실행
파싱의 결과물로서 생성된 AST는 인터프리터가 실행할 수 있는 중간 코드인 바이트코드로 변환되고 인터프리터에 의해 실행됩니다.
