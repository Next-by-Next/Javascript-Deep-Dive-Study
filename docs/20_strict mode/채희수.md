## 📙 strict mode

### 간단 요약 📑

#### 1. 자바스크립트 엔진은 함수 내에서 키워드 없이 변수를 선언하면, 변수를 전역 객체의 프로퍼티로 동적 생성해 암묵적 전역을 발생시킨다.

#### 2. strict mode나 린트 도구를 이용해 자바스크립트 언어의 문법을 좀 더 엄격히 적용해 런타임에서 발생할 오류를 미리 발견할 수 있다.

#### 3. strict mode는 즉시 실행 함수로 감싼 스크립트 단위로 적용하는 것이 바람직하다.

---

### strict mode란?

```javascript
function foo() {
  x = 10;
}
foo();
console.log(x); // 10
// 전역 객체에 x 프로퍼티 동적 생성 = 전역 변수처럼 사용 가능
```

- 전역 스코프에 x 변수의 선언이 존재하지 않기 떄문에 ReferenceError를 발생시킬 것 같지만 자바스크립트 엔진은 암묵적으로 전역 객체에 x 프로퍼티를 동적 생성한다. 이 때 전역 객체의 x 프로퍼티는 마치 전역 변수처럼 사용할 수 있는데 이런 현상을 `암묵적 전역`이라고 한다.
- 암묵적 전역은 오류를 발생시키는 원인이 될 가능성이 크기 때문에 반드시 `var`, `let`, `const` 키워드를 사용하여 변수를 선언한 다음 사용해야 한다.
- 더 근본적으로 잠재적인 오류를 발생시키기 어려운 개발 환경을 만들어 오류를 줄이기 위해 ES5부터 `strict mode`가 추가되었다.
- `strict mode`는 자바스크립트 언어의 문법을 좀 더 엄격히 적용하여 오류를 발생시킬 가능성이 높거나 자바스크립트 엔진의 최적화 작업에 문제를 일으킬 수 있는 코드에 대해 명시적인 에러를 발생시킨다.
- ESLint 같은 **린트 도구**는 strict mode가 제한하는 오류는 물론 코딩 컨벤션을 설정 파일 형태로 정의하고 강제할 수 있기 때문에 더욱 강력한 효과를 얻을 수 있다

### 전역에 strict mode를 적용하는 것을 피하자

- 외부 서드파티 라이브러리가 non-strict-mode인 경우도 있다
- 즉시 실행 함수로 스트립트 전체를 감싸고 스코프를 구분하고 즉시 실행 함수의 선두에 strict mode를 적용하자

  ```javascript
  (function () {
    "use strict";
    // 코드 작성
  })();
  ```

### 함수 단위로 strict mode를 적용하는 것도 피하자

- strict mode는 즉시 실행 함수로 감싼 스크립트 단위로 적용하는 것이 바람직하다

### strict mode가 발생시키는 에러

1. 암묵적 전역 -> ReferenceError
2. delete 연산자로 변수, 함수, 매개변수의 삭제 -> SyntaxError
3. 매개변수 이름의 중복 -> SyntaxError
4. with문의 사용 -> SyntaxError
   - with문은 전달된 객체를 스코프 체인에 추가한다.
   - with문은 동일한 객체의 프로퍼티를 반복해서 사용할 때 객체 이름 생략해 코드는 간단해지는 효과가 있지만, 성능과 가독성이 나빠지는 문제가 있다.
   - -> 따라서 with문은 사용하지 않는 것이 좋다.
