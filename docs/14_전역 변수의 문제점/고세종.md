## 📕 오늘 공부한 내용 . ✒

**오늘 읽은 범위** : 14장

## 14. 전역 변수와 문제점

### 변수의 생명 주기

함수 블록 내부에 선언되면 지역 변수라 하고, 어떠한 블록에도 쌓여 있지 않을경우 전역 변수라 한다.<br>
지역 변수는 함수 내부에 선언된 만큼 생명주기도 해당하는 함수와 같다.<br>
즉, 함수가 호출될때 같이 선언되고 함수가 실행될때 할당되며 함수 호출이 종료되면 변수도 같이 소멸된다.

> 스코프는 일반적으로 함수가 종료되면 함수가 생성한 스코프도 소멸하지만 **누군가가 스코프를 참조하고 있다면**, 스코프는 해제되지 않고 생존한다.

**호이스팅은 스코프 단위로 동작한다**

```javascript
var x = 'hello';

function greet() {
  console.log(x); // undefined
  var x = 'bye';
}
greet();
console.log(x); // hello
```

위 코드에서 greet 함수 내부에서 실행되는 `console.log(x)`는 코드 최상단에 선언된 x의 값을 참조할것이라고 생각하기 쉽다.

그러나 함수 내부에 선언된 이상, 해당 함수의 스코프에 속하기 때문에 호이스팅에 의해 할당 이전에 선언이 먼저 일어나 undefined가 반환된다.

### 전역 변수의 생명주기

전역으로 작성된 코드는 명시적인 호출 없이 실행되며 반환문을 사용할 수 없다.<br>
그렇기 때문에 마지막 문이 실행되어 더 이상 실행할 문이 없을 때 종료된다.

### 전역 변수의 문제점

1. **암묵적 결함**
   전역 변수는 어디서든 참조하고 사용할 수 있기 때문에 모든 코드가 전역 변수를 참조하고 변경할 수 있는 암묵적 결합을 허용한 것이다. 때문에 의도치 않은 상태변화가 발생할 수 있다.

2. **긴 생명주기**
   변수의 이름이 중복될 수 있을 뿐만 아니라 생명 주기가 길기 때문에 메모리도 오래 소비한다.

3. **스코프 체인 상에서 종점에 존재**
   전역 변수는 스코프 체니상 좀점에 존재하기 때문에 가장 마지막에 검색된다. 이는 검색 속도가 느리다는 뜻이다.

4. **네임스페이스 오염**
   자바스크립트는 하나의 파일이 분리되어 있다해도 하나의 전역 스코프를 공유하는데, 이에 중복된 전역 변수나 함수가 존재할수 있어, 예상치 못한 결과를 도래한다.

### 전역 변수의 사용을 억제하는 방법

전역 변수를 지양하고 지역 변수를 지향하자.

1. **즉시 실행 함수**
   모든 코드를 즉시 실행 함수로 감싸면 모든 변수는 즉시 실행 함수의 지역 변수가 된다.

2. **네임스페이스 객체**
   객체를 전역으로 선언해 사용할 변수를 내부 프로퍼티로 선언함으로서 다른 파일간의 네임스페이스 중복을 방지할 수 있다.

3. **모듈 패턴**
   모듈 패턴은 클래스의 기능을 구현하기 위한 자바스크립트 만의 방식으로, 관련있는 변수와 함수를 모아 즉시 실행 함수로 감싸 하나의 모듈로 만드는 방법이다. 현재는 `class` 문법이 나왔기 때문에 잘 사용하지 않는다.

4. **ES6 모듈**
   ES6 모듈은 파일 자체의 독자적인 모듈 스코프를 제공한다.<br>
   사용시에는 script 태그에 `type='module'` 어트리뷰트를 추가하면 모듈로서 동작하고, 모듈의 파일 확장자는 `msj`를 사용하자.

#### +간결한 세 줄 요약
