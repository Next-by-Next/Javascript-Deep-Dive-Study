## let, const 키워드와 브록 레벨 스코프

**오늘 읽은 범위** : 15장 1~4

### 1. var 키워드로 선언한 변수의 문제점

---

#### _변수 중복 선언 허용_

동일한 변수가 이미 선언되어 있는 것을 모르고 중복 선언하면 값까지 할당되어 의도치 않게 먼저 선언된 변수 값이 변경되는 부작용이 발생한다.

```JavaScript
var x = 1;
var y = 1;

var x = 100; // 중복 선언을 허용한다.
var y; // 초기화문이 없어서 무시된다.

console.log(x); // 100
console.log(y); // 1
```


#### _함수 레벨 스코프_

var 키워드로 선언한 변수는 오로지 함수의 코드 블록만을 지역 스코프로 인정한다. 따라서 함수 외부에서 var 키워드로 선언한 변수는 코드 블록 내에서 선언해도 모두 전역 변수가 된다.

\+ for문의 변수 선언문에서 var 키워드로 선언한 변수도 전역 변수가 된다.

`함수 레벨 스코프는 전역 변수를 남발할 가능성을 높인다.` 이로 인해 의도치 않게 전역 변수가 중복 선언되는 경우가 발생한다.

#### _변수 호이스팅_

var 키워드로 변수를 선언하면 변수 호이스팅에 의해 변수 선언문이 스코프의 선두로 끌어 올려진 것처럼 동작한다. 즉, `호이스팅에 의해 var 키워드로 선언한 변수는 변수 선언문 이전에 참조 할 수 있다.` 

단, 할당문 이전에 변수를 참조하면 undefined를 반환한다. 에러를 발생시키지는 않지만 프로그램 흐름상 맞지 않을뿐더러 가독성을 떨어뜨리고 오류를 발생시킬 여지를 남긴다. 선언 단계와 초기화 단계가 구분되지 않아 에러가 발생하지 않았던 것이다.

### 2. let 키워드

---

#### _변수 중복 선언 금지_

var 키워드로 중복 선언하면 아무런 에러가 발생하지 않는다. 하지만 let 키워드로 중복 선언하면 문법 에러(SyntaxError)가 발생한다.

```JavaScript
let foo = 1,2,3;
let foo = 4,5,6; // 중복 불가
console.log(foo); // SyntaxError
```

#### _블록 레벨 스코프_

var 키워드로 선언한 변수는 오로지 함수의 코드 블록만을 지역 스코프로 인정하는 함수 레벨 스코프를 따란다. 하지만 let 키워드로 선언한 변수는 모든 코드 블록을 지역 스코프로 인정하는 `블록 레벨 스코프`를 따른다.

#### _변수 호이스팅_

var 키워드로 선언한 별수와 달리 let 키워드로 선언한 변수는 `변수 호이스팅이 발생하지 않는것처럼 동작`한다. 선언 단계와 초기화 단계가 분리되어 진행된다. 

- **일시적 사각지대** : 스코프의 시작 시점부터 초기화 시작 지점까지 변수를 참고할 수 없는 구간

#### _전역 객체와 let_

var 키워드로 선언한 전역 변수와 전역 함수, 그리고 선언하지 않은 변수에 값을 할당한 암북적 전역은 전역 객체window의 프로퍼티가 된다. 전역 객체 window의 프로퍼티가 된다.

### 3. const 키워드

---

#### _const_

const 키워드는 상수를 선언하기 위해 사용한다. 하지만 반드시 상수만을 위해 사용하지는 않는다.

#### _선언과 초기화_

const 키워드로 선언한 변수는 선언과 동시에 초기화해야 한다. let 함수와 마찬가지로 블록 레벨 스코프를 가지며 변수 호스팅이 발생되지않는것처럼 동작한다.
```JavaScript
const foo = 1;
```
#### _재할당 금지_

var과 let은 자유로우나 counst는 변수를 재할당 하지 않는다.
```JavaScript
const foo = 1;
foo = 2;
```

#### _상수_

`재할당이 금지된 변수`를 말한다. const이 후 변수에 원시 값을 할당한 경우 원시 값은 변경할 수 없는 값이고 const 키워드에 의해 재할당이 금지 모드가 

#### _const 키워드와 객체_

const 키워드에 선언된 변수에 객체를 할당한 경우 값을 변경할 수 있다.

### 4. var vs. let vs. const

---

#### _var_

ES6를 사용한다면 var 키워드 사용X.

#### _let_

재할당이 필요한 경우 한정해 사용. 이때 변수의 스코프는 최대한 좁게.

#### _const_

변수 선언에 기본적으로 사용. 변경이 발생하지 않고 읽기 전용으로 사용하는 원시값과 객체에 사용.