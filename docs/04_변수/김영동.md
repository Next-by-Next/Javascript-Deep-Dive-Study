# 4. 변수

## 4.1. 변수의 개념 및 필요성

### 변수의 정의

> "하나의 값을 저장하기 위해 확보한 메모리 공간 자체 또는 그 메모리 공간을 식별하기 위해 붙인 이름을 말한다."

컴퓨터는 CPU를 사용해 연산하고, 연산에 필요한 데이터는 메모리에 저장한다. 메모리는 1바이트 단위로 구분되어 있고, 각각의 메모리는 고유한 메모리 주소를 가지고 있다. 변수란 데이터를 저장하기 위해 프로그램에 의해 이름을 할당받은 메모리 공간을 의미한다.

### 변수의 필요성

기본적으로 메모리 주소란 16진수로 표현되기 때문에 이를 기억하기가 어렵다. 그리고 메모리 공간에 직접 접근하여 데이터를 다룬다면 여러가지 오류가 발생할 수 있다. 또한 메모리 주소는 메모리 상황에 따라 임의로 결정된다. 즉 동일한 컴퓨터에서 동일한 코드를 실행해도 메모리 주소는 매 번 달라지게 된다. 이러한 문제들 때문에라도 우리는 메모리 공간에 이름을 붙여서 사용한다.

### 변수와 관련된 용어들

- 할당(대입, 저장)(assignment): 변수(공간)에 값을 저장하는 것
- 참조(ref, refernce): 변수에 저장된 값을 읽어들이는 것

### 정리

- 우리는 메모리 상에 값을 저장하고 저장된 값을 사용하기 위해 메모리 주소에 이름을 붙여서 사용한다. 이를 변수라고 한다.
- 변수공간에 저장된 값의 의미를 나타내는 변수명을 사용하면 저장된 값의 의미를 명확히 알 수 있다. 그러므로 적절한 변수명은 가독성을 높힌다.
- 코드는 컴퓨터에게 내리는 명령임과 동시에 개발자를 위한 문서이므로, 적절한 네이밍은 코드를 이해하기 쉽게 만들어주고, 협업과 품질 향상에 도움을 준다.

## 4.2 식별자

### 식별자의 정의

> "식별자는 어떤 값을 구별해서 식별할 수 있는 고유한 이름을 말한다."

앞서 변수란 데이터를 저장하기 위해 이름을 할당받은 메모리 공간을 의미한다고 했다. 식별자는 이 변수를 식별할 수 있는, 즉 변수에 붙은 이름을 해당 변수의 식별자라고 한다. JavaScript에서는 변수뿐만 아니라 함수, 클래스 등 모든 이름이 식별자이다.

변수 자체가 이름을 할당받은 메모리 공간을 의미하기 때문. JavaScript의 변수, 함수, 클래스 모두 선언시 메모리에 공간이 할당되고 식별자를 통해 구분된다.

## 4.3. 선언

변수의 선언이란 변수를 생성하는 것을 말한다. 저장을 위한 메모리공간을 확보하고 확보된 메모리공간의 주소를 식별자와 연결해서 값을 저장할 수 있게 준비하는 것이다. 변수 선언에 의해 확보된 메모리 공간은 확보가 해제 되기 전까지는 누구도 확보된 메모리 공간을 사용할 수 없도록 보호되므로 안전히 사용할 수 있다.

변수를 사용하려면 반드시 선언이 필요하다. 선언되지 않은 변수를 사용하려고 할 경우 오류가 발생한다. JavaScript에서 변수를 선언할 때에는 `var`, `let`, `const`키워드를 사용한다. 다만 var의 경우 여러가지 문제들로 인해 사용을 지양한다. var의 대표적인 문제점에는 함수레벨 스코프를 가진다는 것이 있다.

`let`과 `const`를 배우기 전에 `var` 에 대해 살펴보자.

### 변수 선언 예시

```js
var score;
```

자바스크립트 엔진은 해당 구문을 만나면, score라는 변수이름을 식별자로 등록하고, 저장할 메모리 공간을 확보한다. 확보된 메모리 공간에는 JavaScript 엔진에 의해 `undefinde`라는 값이 암묵적으로 할당되어 초기화된다. 이는 JavaScript의 독특한 특징이다.

## 4.4. 변수 선언의 실행시점과 변수 호이스팅

```js
console.log(a);
var a;
```

```bash
> undefined
```

앞선 예시에서 변수 선언문보다 변수를 참조하는 코드가 앖에 있다. JavaScript 코드는 기본적으로 한 줄씩 순차적으로 실행된다. 그러나 변수의 선언은 소스코드가 한 줄씩 실행되는 런타임이 아닌 그 이전 단계에서 먼저 실행된다.

호이스팅으로 인해서 선언 이전에 참조된 변수가 Referecnce에러를 발생시키지 않고 실행된다. 그 이유는 **_변수 선언_**이 소스코드가 한줄씩 순차적으로 실행되는 시점이 아닌,  
즉 런타임이 아니라 **_그 이전 단계_**에서 먼저 실행되기 때문이다.

> 주의 ⚠️: var의 경우 호이스팅되면서 변수의 선언문이 스코프의 최상단으로 끌어올려진다. 그래서 선언되기 전에 변수를 참조할 수 있게 되는데 이는 개발자가 의도한 동작과 다르게 행동할 수 있게 만든다.

> let과 const, function, class 등의 키워드를 사용해 선언하는 모든 식별자가 마찬가지로 호이스팅되지만, TDZ(Temporal Dead Zone)을 통해서 선언문에 도달할때까지 참조할 수 없게 한다. 이는 개발자의 의도를 더 명확하게 드러내고, 오류를 발생시켜 개발자가 의도하지 않은 동작이 발생하는 것을 막아준다. 이것이 var 대신 let과 const를 사용하는 이유 중 하나이다.

## 4.5 값의 할당

변수에 값을 할당하기 위해서 할당 연산자(=)사용한다. 할당 연산자는 우변의 값을 죄변의 변수에 할당한다.

```js
// 선언과 할당
var age;
age = 20;

// 선언과 동시에 할당
var age = 20;
```

변수 선언과 할당을 이렇게 두가지 방식으로 표현이 가능하다. 주의할점은 변수 선언과 값의 할당의 실행시점이 다른다는 것이다. 변수 선언은 소스코드가 순차적으로 실행되는 시점인 런타임 이전에 먼저 실행되지만 값의 할당은 소스코드가 순차적으로 실행되는 시점인 런타임에 실행된다. 따라서 변수의 선언과 값의 할당을 한 문장으로 표현해도 변수에 undefined가 할당되어 초기화되는 것은 변함이 없다.

기억할 부분은 함수선언시 초기화시 변수를 선언하고 메모리에 공간을 확보하지만, 그 자리에 있던 undefined를 지우고 80을 저장하는 것이 아니라, 새로운 메모리 공간을 확보하고 80이라는 값을 저장한다.

## 4.6 값의 재할당

재할당이란 이미 값이 할당되어 있는 변수에 새로운 값을 다시 할당하는 것을 의미한다. 값을 재할당 할 수 없어서 변수에 저장된 값을 변경할 수 없다면, 변수가 아니라 **상수**라고 한다.(우리는 const를 사용해 상수를 선언할 수 있다. 하지만, const가 상수를 선언하기 위해서만 사용되지는 않는다.)

변수를 재할당할때에는 앞선 변수의 초기화 과정과 마찬가지로 **새로운 메모리 공간**을 확보하고 그 공간에 값을 저장하게 된다. 그리고 이전에 변수가 참조하던 메모리 공간은 가비지 컬렉터에 의해 해제된다.

### 가비지 콜렉터

가비지 컬렉터(garbage collector)는 자동 메모리 관리 시스템입니다. 프로그램에 의해 할당된 메모리가 더이상 사용되지지 않아 가비지(garbage) 상태가 되면 자동으로 메모리를 초기화합니다.

C언어와 같은 저수준의 언어는 개발자가 직접 메모리를 할당하고 해제해야 하기에 개발자의 역량에 따라 최적의 성능을 확보 가능하지만 치명적 오류를 생산할 가능성도 있다, JavaScript는 가비지 컬렉터가 자동으로 메모리를 관리해주기 때문에 개발자는 메모리를 직접 관리할 필요가 없다. 이는 성능 면에서 어느 정도의 손실을 발생시키나 개발자 역량과 관련 없이 일정한 생산성을 보장해준다.
