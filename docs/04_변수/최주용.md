# 변수

### 4.1 변수란 무엇인가? 왜 필요한가 ?

변수란, 하나의 값을 저장하기 위해 메모리에서 확보(`allocate`)한 공간이다.
컴퓨터는 CPU를 사용해 연산하고, 메모리를 사용해 데이터를 기억하며 연산의 결과 또한 메모리에 저장된다. 기억하고 싶은 값을 메모리에 저장하여 저장된 값을 읽어들이기 위해 **변수**라는 개념이 사용된다.

---

### 4.2 식별자(identifier)

메모리 공간을 식별하기 위해 붙인 변수의 고유한 이름이다. 식별자는 메모리 주소와 매핑관계를 가지며, 매핑 정보도 메모리에 저장되어야 한다.

---

### 4.3 변수 선언

식별자와 메모리 주소를 연결하여 값을 저장할 수 있게 준비하는 것이다. 변수 선언에 의해 확보된 메모리 공간은 해제되기 전까지 누구도 해당 공간을 사용할 수 없도록 보호된다.
변수 선언 시 `var`, `const`, `let` 키워드를 사용한다. ES6 에서 let과 const가 도입되기 전까지는 var 로 변수를 선언하였다.

- 변수 선언의 단계

1. 선언 단계 : 변수 이름을 등록해 자바스크립트 엔진에 변수의 존재를 알린다.
2. 초기화 단계 : 값을 저장하기 위한 메모리 공간을 확보하고 암묵적으로 `undefined`를 할당해 초기화한다.

var 키워드를 사용하여 변수를 선언하면 위의 두 단계가 동시에 진행된다. 변수를 사용하려면 이처럼 반드시 선언 후에 사용해야 하며, 그렇지 않을 시 `referenceError`가 발생한다.

---

### 4.4 변수 선언의 실행 시점과 변수 호이스팅

```
console.log(score); // undefined
var score; // 변수 선언문
```

기본적으로 코드는 위에서 한 줄씩 실행되므로, 위 코드의 `console.log`는 `referenceError`가 발생할 것이라 예상되지만, `undefined`를 출력하고 정상적으로 종료된다. 이유는 **변수 선언이 런타임보다 이전에 먼저 실행**되기 때문이다. 이것을 마치 변수 선언문이 코드 맨 위로 끌어올려진 것처럼 동작한다고 해서 **변수 호이스팅** 이라고 부른다. 변수 선언 뿐만이 아닌 모든 선언문은 **호이스팅** 된다.

---

### 4.5 값의 할당

변수에 값을 할당할 때는 `=` (대입 연산자)를 사용한다.

```
var score; // 변수의 선언
score = 120; // 변수에 값 할당

var score = 120 // 위 두 줄의 축약
```

변수의 선언과 동시에 할당을 하여도 자바스크립트 엔진은 선언문과 할당문으로 나눠서 실행한다. 이는 변수 호이스팅을 하기 위함이다. 변수에 값을 할당할 때는 이전의 값(`undefined`)가 저장되어있던 메모리 공간을 지우고, 해당 공간에 새로 할당할 값을 저장하는게 아니라, 새로운 메모리 공간을 확보하고 그곳에 값을 할당한 후 식별자끼리 연결하는 것이다.

---

### 4.6 값의 재할당

변수의 재할당이란 이미 값이 들어있는 변수에 새로운 값을 다시 할당하는 것을 의미한다.

```
var score = 80; // 변수 선언과 동시에 할당
score = 90; // 새로운 값을 기존 변수에 재할당
```

var 키워드로 선언한 변수는 값을 재할당할 수 있다.
**재할당**이란 기존의 값을 버리고 새로운 값을 할당하는 것이다. 위 코드의 첫번째 보면 선언과 동시에 할당을 한다.
그래서 첫번째 코드는 재할당이 아니라 생각할 수 있다. 하지만 자바스크립트 엔진은 선언문과 할당문은 나눠서 실행하고, 선언 시 `undefined`로 초기화 하기 때문에, 값을 처음 할당하는 것도 사실 **재할당**이다.

위 그림과 같이 값을 재할당한다면, 기존에 변수에 담겨있던 메모리 공간을 비우고 새로운 값을 할당하는 것이 아닌, **새로운 메모리 공간을 확보하고 그곳에 값을 할당하여 식별자와 매핑**한다.
따라서 더 이상 사용하지 않는 값이 존재하게 되고, 이러한 데이터들은 `가비지 컬렉터`에 의해서 메모리에서 자동 해제된다.
