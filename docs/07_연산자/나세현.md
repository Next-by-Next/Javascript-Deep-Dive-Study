## 📔 7장: 연산자

연산자는 하나 이상의 표현식을 대상으로 산술, 할당, 비교, 논리, 타입, 지수 연산 등을 수행해 하나의 값을 만든다.  
피연산자는 연산의 대상이 되어야 하므로 값으로 평가할 수 있어야 한다.

### ✨ 7.1: 산술 연산자

피연산자를 대상으로 수학적 계산을 수행해 새로운 숫자 값을 만들며, 이가 불가능한 경우 `NaN`을 반환한다.

#### 이항 산술 연산자

2개의 피연산자를 산술 연산하여 숫자 값을 만든다.  
모든 이항 산술자는 피연산자의 값을 바꾸지 않으며 언제나 새로운 값을 만들 뿐이다.

- `+`
- `-`
- `*`
- `/`
- `%`

#### 단항 산술 연산자

1개의 피연산자를 산술 연산하여 숫자 값을 만든다.

- `++` (부수 효과 O)
- `--` (부수 효과 O)
- `+`
- `-`

🚨 이항 산술 연산자와 달리 **증가/감소(`++`/`--`) 연산자는 피연산자의 값을 변경하는 부수 효과가 있다.**

증가/감소 연산자는 위치에 따라 의미가 다르다.

- 피연산자 **앞**에 위치한 전위 증가/감소 연산자는 먼저 피연산자의 값을 증가/감소시킨 후, 다른 연산을 수행한다.
- 피연산자 **뒤**에 위치한 후위 증가/감소 연산자는 먼저 다른 연산을 수행한 후, 피연산자의 값을 증가/감소시킨다.

```javascript
var x = 5,
  result;

// 선할당 후증가
result = x++;
console.log(result, x); // 5 6

// 선증가 후할당
result = ++x;
console.log(result, x); // 7 7

// 선할당 후감소
result = x--;
console.log(result, x); // 7 6

// 선감소 후할당
result = --x;
console.log(result, x); // 5 5
```

숫자 타입이 아닌 피연산자에 `+` 단항 연산자를 사용하면 숫자 타입으로 변환해 반환한다. (부수 효과 X)

```javascript
var x = '1';
console.log(+x); // 1

x = true;
console.log(+x); // 1

x = 'Hello';
console.log(+x); // NaN
```

`-` 연산자는 피연산자의 부호를 반전한 값을 반환한다.  
`+` 연산자와 마찬가지로 숫자 타입이 아닌 피연산자에 사용하면 숫자 타입으로 변환해 반환한다. (부수 효과 X)

#### 문자열 연결 연산자

**`+` 연산자는 피연산자 중 하나 이상이 문자열인 경우 문자열 연결 연산자로 동작한다.**  
그 외의 경우는 산술 연산자로 동작한다.

```javascript
'1' + 2; // '12

1 + true; // 2

1 + false; // 1

1 + null; // 1

1 + undefined; // NaN
```

**개발자의 의도와 상관없이 자바스크립트 엔진에 의해 타입이 암묵적으로 변환되기도 한다.**  
이를 **암묵적 타입 변환** 또는 **타입 강제 변환**이라고 한다.

### ✨ 7.2: 할당 연산자

우항에 있는 피연산자의 평가 결과를 좌항의 변수에 할당한다.  
할당 연산자는 좌항의 변수에 값을 할당하므로 변수 값이 변하는 부수 효과가 있다.

- `=`
- `+=`
- `-=`
- `*=`
- `/=`
- `%=`

할당문은 변수에 값을 할당하는 부수 효과만 있을 뿐 값으로 평가되지는 않을 것 같지만, **할당문은 값으로 평가되는 표현식인 문으로서 할당된 값으로 평가된다.**  
따라서 다음처럼 변수에 같은 값을 연쇄 할당할 수도 있다.

```javascript
var a, b, c;
a = b = c = 0;
```

### ✨ 7.3: 비교 연산자

좌항과 우항의 피연산자를 비교한 다음 그 결과를 불리언 값으로 반환한다. (`if`문이나 `for`문의 조건식에서 주로 사용)

#### 동등/일치 비교 연산자

- `==` (동등 비교)
- `===` (일치 비교)
- `!=` (부동등 비교)
- `!==` (불일치 비교)

동등 비교 연산자와 일치 비교 연산자는 비교하는 엄격성의 정도가 다르다. (전자는 느슨한 비교, 후자는 엄격한 비교)  
**동등 비교 연산자는 좌항과 우항의 피연산자를 비교할 때 먼저 암묵적 타입 변환을 통해 타입을 일치 시킨 후 같은 값인지 비교한다.**  
이는 편리하긴 하지만 결과 예측이 어렵고 실수하기가 쉽다.  
따라서 일치 비교 연산자를 사용하는 것이 좋다.
**일치 비교 연산자는 좌항과 우항의 피연산자가 타입도 같고 값도 같은 경우에만 `true`를 반환한다.** (암묵적 타입 변환을 하지 않고 값 비교)

🚨 **일치 비교 연산자에서 주의할 것은 `NaN`이다.**

```javascript
// NaN은 자신과 일치하지 않는 유일한 값이다.
NaN === NaN; // false
```

🚨 **숫자 0도 주의하자.**

```javascript
// 양의 0과 음의 0의 비교. 일치 비교/동등 비교 모두 결과는 true
0 === -0; // true
0 == -0; // true
```

`Object.is` 메서드는 위에서 주의해야 한다고 언급한 부분에서도 모두 예측 가능한 정확한 비교 결과를 반환한다.

```javascript
-0 === +0; // true
Object.is(-0, +0); // false

NaN === NaN; // false
Object.is(NaN, NaN); // true
```

#### 대소 관계 비교 연산자

피연산자의 크기를 비교해 불리언 값을 반환한다.

- `>`
- `<`
- `>=`
- `<=`

### ✨ 7.4: 삼항 조건 연산자

조건식의 평가 결과에 따라 반환할 값을 결정한다.  
자바스크립트의 유일한 삼항 연산자이며, 부수 효과는 없다.

`조건식 ? 조건식이 true일 때 반환할 값 : 조건식이 false일 때 반환할 값`

물음표 앞의 첫번째 피연산자의 평가 결과가 불리언 값이 아니라면, 불리언 값으로 암묵적 타입 변환된다.  
삼항 조건 연산자 표현식은 사실상 조건문이므로 `if...else`문을 사용해도 유사하게 처리할 수 있다.  
차이점: **삼항 조건 연산자 표현식은 값처럼 사용 가능하지만 `if...else`문은 값처럼 사용 불가능**

### ✨ 7.5: 논리 연산자

우항과 좌항의 피연산자(부정 논리 연산자의 경우 우항의 피연산자)를 논리 연산한다.

- `||`
- `&&`
- `!`

논리 부정 연산자(`!`)는 언제나 불리언 값을 반환하며, 피연산자가 불리언 값이 아닐 경우 불리언 값으로 암묵적 타입 변환한다.  
논리합(`||`) 또는 논리곱(`&&`) 연산자 표현식의 평가 결과는 불리언 값이 아닐 수도 있으며, 언제나 2개의 피연산자 중 어느 한쪽으로 평가된다.

```javascript
'Cat' && 'Dog'; // 'Dog'
```

### ✨ 7.6: 쉼표 연산자

왼쪽 피연산자부터 차례대로 피연산자를 평가하고, 마지막 피연산자의 평가가 끝나면 마지막 피연산자의 평가 결과를 반환한다.

```
var x, y, z;

x = 1, y = 2, z = 3;  // 3
```

### ✨ 7.7: 그룹 연산자

소괄호(`()`)로 감싸는 그룹 연산자는 자신의 피연산자인 표현식을 가장 먼저 평가한다.  
따라서 이를 사용하면 연산의 우선순위를 조정할 수 있다.

### ✨ 7.8: `typeof` 연산자

피연산자의 데이터 타입을 문자열로 반환한다.  
➡️ `string`, `number`, `boolean`, `undefined`, `symbol`, `object`, `function` 중 하나  
**`null`을 반환하는 경우는 없다.** (7개의 데이터 타입과 정확히 일치하지는 않음)

🚨 **`typeof` 연산자로 `null` 값을 연산해 보면 `object`를 반환한다. (버그)**  
➡️ 값이 `null`인지 확인할 때는 `typeof` 말고 일치 연산자(`===`)를 사용한다.

🚨 **선언하지 않은 식별자를 `typeof` 연산자로 연산해 보면 `ReferenceError`가 발생하지 않고 `undefined`를 반환한다.**

### ✨ 7.9: 지수 연산자

좌항의 피연산자를 밑으로, 우항의 피연산자를 지수로 거듭제곱하여 숫자 값을 반환한다. (예: `2 ** 2`)  
해당 연산자가 도입되기 전에는 `Math.pow` 메서드를 사용했다. (예: `Math.pow(2, 2)`)  
다른 산술 연산자와 마찬가지로 할당 연산자와 함께 사용할 수 있다. (`**=`)  
**지수 연산자는 이항 연산자 중에서 우선순위가 가장 높다.**

```javascript
2 * 5 ** 2; // 50
```

### ✨ 7.10: 그 외의 연산자

| 연산자       | 개요                                                        |
| ------------ | ----------------------------------------------------------- |
| `?.`         | 옵셔널 체이닝 연산자                                        |
| `??`         | `null` 병합 연산자                                          |
| `delete`     | 프로퍼티 삭제                                               |
| `new`        | 생성자 함수를 호출할 때 사용하여 인스턴스를 생성            |
| `instanceof` | 좌변의 객체가 우변의 생성자 함수와 연결된 인스턴스인지 판별 |
| `in`         | 프로퍼티 존재 확인                                          |

### ✨ 7.11: 연산자의 부수 효과

대부분의 연산자는 다른 코드에 영향을 주지 않지만, **할당 연산자(`=`), 증가/감소 연산자(`++`/`--`), `delete` 연산자**는 다른 코드에 영향을 주는 부수 효과가 있다.

### ✨ 7.12: 연산자 우선순위

우선순위가 높을수록 먼저 실행된다.

| 우선순위 | 연산자                                                                                      |
| -------- | ------------------------------------------------------------------------------------------- |
| 1        | `()`                                                                                        |
| 2        | `new`(매개변수 존재), `.`, `[]`(프로퍼티 접근), `()`(함수 호출), `?.`(옵셔널 체이닝 연산자) |
| 3        | `new`(매개변수 미존재)                                                                      |
| 4        | `x++`, `x--`                                                                                |
| 5        | `!x`, `+x`, `-x`, `++x`, `--x`, `typeof`, `delete`                                          |
| 6        | `**`(이항 연산자 중에서 우선순위 가장 높음)                                                 |
| 7        | `*`, `/`, `%`                                                                               |
| 8        | `+`, `-`                                                                                    |
| 9        | `<`, `<=`, `>`, `>=`, `in`, `instanceof`                                                    |
| 10       | `==`, `!=`, `===`, `!==`                                                                    |
| 11       | `??`(`null` 병합 연산자)                                                                    |
| 12       | `&&`                                                                                        |
| 13       | `OR` 연산자                                                                                 |
| 14       | 삼항 연산자                                                                                 |
| 15       | 할당 연산자                                                                                 |
| 16       | `,`                                                                                         |

### ✨ 7.13: 연산자 결합 순서

| 결합 순서    | 연산자                                                                                                       |
| ------------ | ------------------------------------------------------------------------------------------------------------ |
| 좌항 ➡️ 우항 | `+`, `-`, `/`, `%`, `<`, `<=`, `>`, `>=`, `&&`, `OR` 연산자, `.`, `[]`, `()`, `??`, `?.`, `in`, `instanceof` |
| 우항 ➡️ 좌항 | `++`, `--`, 할당 연산자, `!x`, `+x`, `-x`, `++x`, `--x`, `typeof`, `delete`, 삼항 연산자, `**`               |
