## ðŸ“• ì˜¤ëŠ˜ ê³µë¶€í•œ ë‚´ìš©, ì´ë ‡ê²Œ ì •ë¦¬í•´ ë´…ì‹œë‹¤. âœ’

**TIL(Today I learn) ê¸°ë¡ì¼** : 2023. 03. 13

# 45 í”„ë¡œë¯¸ìŠ¤

ìžë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ìœ„í•œ í•˜ë‚˜ì˜ íŒ¨í„´ìœ¼ë¡œ ì½œë°± í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œë‹¤.     
í•˜ì§€ë§Œ ì „í†µì ì¸ ì½œë°± íŒ¨í„´ì€ ì½œë°± í—¬ë¡œ ì¸í•´ ê°€ë…ì„±ì´ ë‚˜ì˜ê³  ë¹„ë™ê¸° ì²˜ë¦¬ ì¤‘ ë°œìƒí•œ ì—ëŸ¬ì˜ ì²˜ë¦¬ê°€ ê³¤ëž€í•˜ë©° ì—¬ëŸ¬ ê°œì˜ ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ í•œë²ˆì— ì²˜ë¦¬í•˜ëŠ” ë°ë„ í•œê³„ê°€ ìžˆë‹¤.    
    
ES6ì—ì„œëŠ” ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ìœ„í•œ ë˜ ë‹¤ë¥¸ íŒ¨í„´ìœ¼ë¡œ í”„ë¡œë¯¸ìŠ¤ë¥¼ ë„ìž…í–ˆë‹¤. í”„ë¡œë¯¸ìŠ¤ëŠ” ì „í†µì ì¸ ì½œë°± íŒ¨í„´ì´ ê°€ì§„ ë‹¨ì ì„ ë³´ì™„í•˜ë©° ë¹„ë™ê¸° ì²˜ë¦¬ ì‹œì ì„ ëª…í™•í•˜ê²Œ í‘œí˜„í•  ìˆ˜ ìžˆë‹¤.   
   
## 1. ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ìœ„í•œ ì½œë°± íŒ¨í„´ì˜ ë‹¨ì    
    
### 1) ì½œë°± í—¬     
```js
// GET ìš”ì²­ì„ ìœ„í•œ ë¹„ë™ê¸° í•¨ìˆ˜
const get = url => {
  const xhr = new XMLHttpRequest();
  xhr.open('GET', url);
  xhr.send();

  xhr.onload = () => {
    if (xhr.status === 200) {
      // ì„œë²„ì˜ ì‘ë‹µì„ ì½˜ì†”ì— ì¶œë ¥í•œë‹¤.
      console.log(JSON.parse(xhr.response));
    } else {
      console.error(`${xhr.status} ${xhr.statusText}`);
    }
  };
};

// idê°€ 1ì¸ postë¥¼ ì·¨ë“
get('https://jsonplaceholder.typicode.com/posts/1');
/*
{
  "userId": 1,
  "id": 1,
  "title": "sunt aut facere ...",
  "body": "quia et suscipit ..."
}
*/
```
ìœ„ ì˜ˆì œì˜ getí•¨ìˆ˜ëŠ” ì„œë²„ì˜ ì‘ë‹µ ê²°ê³¼ë¥¼ ì½˜ì†”ì— ì¶œë ¥í•œë‹¤. get í•¨ìˆ˜ê°€ ì„œë²„ì˜ ì‘ë‹µ ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ê²Œí•˜ë ¤ë©´?   
   
get í•¨ìˆ˜ëŠ” ë¹„ë™ê¸° í•¨ìˆ˜ë‹¤.    
ë¹„ë™ê¸° í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ í•¨ìˆ˜ ë‚´ë¶€ì˜ ë¹„ë™ê¸°ë¡œ ë™ìž‘í•˜ëŠ” ì½”ë“œê°€ ì™„ë£Œë˜ì§€ ì•Šì•˜ë‹¤ í•´ë„ ê¸°ë‹¤ë¦¬ì§€ ì•Šê³  ì¦‰ì‹œ ì¢…ë£Œëœë‹¤.    
ì¦‰, ë¹„ë™ê¸° í•¨ìˆ˜ ë‚´ë¶€ì˜ ë¹„ë™ê¸°ë¡œ ë™ìž‘í•˜ëŠ” ì½”ë“œëŠ” ë¹„ë™ê¸° í•¨ìˆ˜ê°€ ì¢…ë£Œëœ ì´í›„ì— ì™„ë£Œëœë‹¤.   
ë”°ë¼ì„œ ë¹„ë™ê¸° í•¨ìˆ˜ ë‚´ë¶€ì˜ ë¹„ë™ê¸°ë¡œ ë™ìž‘í•˜ëŠ” ì½”ë“œì—ì„œ ì²˜ë¦¬ ê²°ê³¼ë¥¼ ì™¸ë¶€ë¡œ ë°˜í™˜í•˜ê±°ë‚˜ ìƒìœ„ ìŠ¤ì½”í”„ì˜ ë³€ìˆ˜ì— í• ë‹¹í•˜ë©´ ê¸°ëŒ€í•œ ëŒ€ë¡œ ë™ìž‘í•˜ì§€ ì•ŠëŠ”ë‹¤.   
   
setTimeout í•¨ìˆ˜ì˜ ì½œë°± í•¨ìˆ˜ì—ì„œ ìƒìœ„ ìŠ¤ì½”í”„ì˜ ë³€ìˆ˜ì— ê°’ì„ í• ë‹¹í•´ ë³´ìž.    
setTimeout í•¨ìˆ˜ëŠ” ìƒì„±ëœ íƒ€ì´ë¨¸ë¥¼ ì‹ë³„í•  ìˆ˜ ìžˆëŠ” ê³ ìœ í•œ íƒ€ì´ë¨¸ idë¥¼ ë°˜í™˜í•˜ë¯€ë¡œ ì½œë°± í•¨ìˆ˜ì—ì„œ ê°’ì„ ë°˜í™˜í•˜ëŠ” ê²ƒì€ ë¬´ì˜ë¯¸í•˜ë‹¤.   
```js
let g = 0;

// ë¹„ë™ê¸° í•¨ìˆ˜ì¸ setTimeout í•¨ìˆ˜ëŠ” ì½œë°± í•¨ìˆ˜ì˜ ì²˜ë¦¬ ê²°ê³¼ë¥¼ ì™¸ë¶€ë¡œ ë°˜í™˜í•˜ê±°ë‚˜
// ìƒìœ„ ìŠ¤ì½”í”„ì˜ ë³€ìˆ˜ì— í• ë‹¹í•˜ì§€ ëª»í•œë‹¤.
setTimeout(() => { g = 100; }, 0);
console.log(g); // 0
```

ë¹„ë™ê¸° í•¨ìˆ˜ëŠ” ë¹„ë™ê¸° ì²˜ë¦¬ ê²°ê³¼ë¥¼ ì™¸ë¶€ì— ë°˜í™˜í•  ìˆ˜ ì—†ê³ , ìƒìœ„ ìŠ¤ì½”í”„ì˜ ë³€ìˆ˜ì— í• ë‹¹í•  ìˆ˜ë„ ì—†ë‹¤.   
ë”°ë¼ì„œ ë¹„ë™ê¸° í•¨ìˆ˜ì˜ ì²˜ë¦¬ ê²°ê³¼(ì„œë²„ì˜ ì‘ë‹µ ë“±)ì— ëŒ€í•œ í›„ì†ì²˜ë¦¬ëŠ” ë¹„ë™ê¸° í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ìˆ˜í–‰í•´ì•¼ í•œë‹¤.   
ì´ë•Œ ë¹„ë™ê¸° í•¨ìˆ˜ë¥¼ ë²”ìš©ì ìœ¼ë¡œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ë¹„ë™ê¸° í•¨ìˆ˜ì— ë¹„ë™ê¸° ì²˜ë¦¬ ê²°ê³¼ì— ëŒ€í•œ í›„ì†ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•˜ëŠ” ì½œë°± í•¨ìˆ˜ë¥¼ ì „ë‹¬í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë‹¤.   
í•„ìš”ì— ë”°ë¼ ë¹„ë™ê¸° ì²˜ë¦¬ê°€ ì„±ê³µí•˜ë©´ í˜¸ì¶œë  ì½œë°± í•¨ìˆ˜ì™€ ë¹„ë™ê¸° ì²˜ë¦¬ê°€ ì‹¤íŒ¨í•˜ë©´ í˜¸ì¶œë  ì½œë°± í•¨ìˆ˜ë¥¼ ì „ë‹¬í•  ìˆ˜ ìžˆë‹¤.   
```js
// GET ìš”ì²­ì„ ìœ„í•œ ë¹„ë™ê¸° í•¨ìˆ˜
const get = (url, successCallback, failureCallback) => {
  const xhr = new XMLHttpRequest();
  xhr.open('GET', url);
  xhr.send();

  xhr.onload = () => {
    if (xhr.status === 200) {
      // ì„œë²„ì˜ ì‘ë‹µì„ ì½œë°± í•¨ìˆ˜ì— ì¸ìˆ˜ë¡œ ì „ë‹¬í•˜ë©´ì„œ í˜¸ì¶œí•˜ì—¬ ì‘ë‹µì— ëŒ€í•œ í›„ì† ì²˜ë¦¬ë¥¼ í•œë‹¤.
      successCallback(JSON.parse(xhr.response));
    } else {
      // ì—ëŸ¬ ì •ë³´ë¥¼ ì½œë°± í•¨ìˆ˜ì— ì¸ìˆ˜ë¡œ ì „ë‹¬í•˜ë©´ì„œ í˜¸ì¶œí•˜ì—¬ ì—ëŸ¬ ì²˜ë¦¬ë¥¼ í•œë‹¤.
      failureCallback(xhr.status);
    }
  };
};

// idê°€ 1ì¸ postë¥¼ ì·¨ë“
// ì„œë²„ì˜ ì‘ë‹µì— ëŒ€í•œ í›„ì† ì²˜ë¦¬ë¥¼ ìœ„í•œ ì½œë°± í•¨ìˆ˜ë¥¼ ë¹„ë™ê¸° í•¨ìˆ˜ì¸ getì— ì „ë‹¬í•´ì•¼ í•œë‹¤.
get('https://jsonplaceholder.typicode.com/posts/1', console.log, console.error);
/*
{
  "userId": 1,
  "id": 1,
  "title": "sunt aut facere ...",
  "body": "quia et suscipit ..."
}
*/
```
ì´ì²˜ëŸ¼ ì½œë°± í•¨ìˆ˜ë¥¼ í†µí•´ ë¹„ë™ê¸° ì²˜ë¦¬ ê²°ê³¼ì— ëŒ€í•œ í›„ì† ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•˜ëŠ” ë¹„ë™ê¸° í•¨ìˆ˜ê°€ ë¹„ë™ê¸° ì²˜ë¦¬ ê²°ê³¼ë¥¼ ê°€ì§€ê³  ë˜ ë‹¤ì‹œ ë¹„ë™ê¸° í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ì•¼ í•œë‹¤ë©´ ì½œë°± í•¨ìˆ˜ í˜¸ì¶œì´ ì¤‘ì²©ë˜ì–´   
ë³µìž¡ë„ê°€ ë†’ì•„ì§€ëŠ” í˜„ìƒì´ ë°œìƒí•˜ëŠ”ë°, ì´ë¥¼ ì½œë°± í—¬ì´ë¼ í•œë‹¤.   
   
### 2) ì—ëŸ¬ ì²˜ë¦¬ì˜ í•œê³„   
ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ìœ„í•œ ì½œë°± íŒ¨í„´ì˜ ë¬¸ì œì  ì¤‘ì—ì„œ ê°€ìž¥ ì‹¬ê°í•œ ê²ƒì€ ì—ëŸ¬ ì²˜ë¦¬ê°€ ê³¤ëž€í•˜ë‹¤ëŠ” ê²ƒì´ë‹¤.   
```js
try {
  setTimeout(() => { throw new Error('Error!'); }, 1000);
} catch (e) {
  // ì—ëŸ¬ë¥¼ ìºì¹˜í•˜ì§€ ëª»í•œë‹¤
  console.error('ìºì¹˜í•œ ì—ëŸ¬', e);
}
```
ì—ëŸ¬ë¥¼ ìºì¹˜í•˜ì§€ ëª»í•˜ëŠ” ì´ìœ ëŠ” ì•„ëž˜ì™€ ê°™ë‹¤.   
ë¹„ë™ê¸° í•¨ìˆ˜ì¸ setTimeoutì€ ë¹„ë™ê¸° í•¨ìˆ˜ì´ë¯€ë¡œ ì½œë°± í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ëŠ” ê²ƒì„ ê¸°ë‹¤ë¦¬ì§€ ì•Šê³  ì¦‰ì‹œ ì¢…ë£Œë˜ì–´ ì½œ ìŠ¤íƒì—ì„œ ì œê±°ëœë‹¤.   
ì´í›„ íƒ€ì´ë¨¸ê°€ ë§Œë£Œë˜ë©´ setTimeout í•¨ìˆ˜ì˜ ì½œë°± í•¨ìˆ˜ëŠ” íƒœìŠ¤í¬ íë¡œ í‘¸ì‹œë˜ê³  ì½œ ìŠ¤íƒì´ ë¹„ì–´ì¡Œì„ ë•Œ ì´ë²¤íŠ¸ ë£¨í”„ì— ì˜í•´ ì½œ ìŠ¤íƒìœ¼ë¡œ í‘¸ì‹œë˜ì–´ ì‹¤í–‰ëœë‹¤.   
    
setTimeout í•¨ìˆ˜ì˜ ì½œë°± í•¨ìˆ˜ê°€ ì‹¤í–‰ë  ë•Œ setTime í•¨ìˆ˜ëŠ” ì´ë¯¸ ì½œ ìŠ¤íƒì—ì„œ ì œê±°ëœ ìƒíƒœë‹¤    
ì´ê²ƒì€ setTimeout í•¨ìˆ˜ì˜ ì½œë°± í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œ ê²ƒì´ setTimeout í•¨ìˆ˜ê°€ ì•„ë‹ˆë¼ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.   
setTimeout í•¨ìˆ˜ì˜ ì½œë°± í•¨ìˆ˜ì˜ í˜¸ì¶œìžê°€ setTimeout í•¨ìˆ˜ë¼ë©´ ì½œ ìŠ¤íƒì˜ í˜„ìž¬ ì‹¤í–‰ì¤‘ì¸ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ì½œë°± í•¨ìˆ˜ì˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì¼ ë•Œ í˜„ìž¬ ì‹¤í–‰ ì¤‘ì¸ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì˜ í•˜ìœ„ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€    
setTimeout í•¨ìˆ˜ì—¬ì•¼ í•œë‹¤.   
   
ì—ëŸ¬ëŠ” í˜¸ì¶œìž ë°©í–¥ìœ¼ë¡œ ì „íŒŒëœë‹¤.   
ì¦‰, ì½œ ìŠ¤íƒì˜ ì•„ëž˜ ë°©í–¥ìœ¼ë¡œ ì „íŒŒëœë‹¤.   
í•˜ì§€ë§Œ ì•žì—ì„œ ì‚´íŽ´ë³¸ ë°”ì™€ ê°™ì´ setTimeout í•¨ìˆ˜ì˜ ì½œë°± í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒì€ setTimeout í•¨ìˆ˜ê°€ ì•„ë‹ˆë‹¤.   ë”°ë¼ì„œ setTimeout í•¨ìˆ˜ì˜ ì½œë°± í•¨ìˆ˜ê°€ ë°œìƒì‹œí‚¨ ì—ëŸ¬ëŠ” catch ë¸”ë¡ì—ì„œ ìºì¹˜ë˜ì§€ ì•ŠëŠ”ë‹¤.   
   
 ì´ë¥¼ ê·¹ë³µí•˜ê¸° ìœ„í•´ ES6ì—ì„œ í”„ë¡œë¯¸ìŠ¤ê°€ ë„ìž…ë˜ì—ˆë‹¤.    
    
## 2. í”„ë¡œë¯¸ìŠ¤ì˜ ìƒì„±

Promise ìƒì„±ìž í•¨ìˆ˜ë¥¼ new ì—°ì‚°ìžì™€ í•¨ê»˜ í˜¸ì¶œí•˜ë©´ í”„ë¡œë¯¸ìŠ¤(Promise ê°ì²´)ë¥¼ ìƒì„±í•œë‹¤.    
ES6ì—ì„œ ë„ìž…ëœ PromiseëŠ” í˜¸ìŠ¤íŠ¸ ê°ì²´ê°€ ì•„ë‹Œ ECMAScript ì‚¬ì–‘ì— ì •ì˜ëœ í‘œì¤€ ë¹ŒíŠ¸ì¸ ê°ì²´ë‹¤.   
Promise ìƒì„±ìž í•¨ìˆ˜ëŠ” ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•  ì½œë°± í•¨ìˆ˜ë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬ë°›ëŠ”ë° ì´ ì½œë°± í•¨ìˆ˜ëŠ” resolveì™€ rejectí•¨ìˆ˜ë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬ë°›ëŠ”ë‹¤.    

```js
// GET ìš”ì²­ì„ ìœ„í•œ ë¹„ë™ê¸° í•¨ìˆ˜
const get = url => {
  const xhr = new XMLHttpRequest();
  xhr.open('GET', url);
  xhr.send();

  xhr.onload = () => {
    if (xhr.status === 200) {
      // ì„œë²„ì˜ ì‘ë‹µì„ ì½˜ì†”ì— ì¶œë ¥í•œë‹¤.
      console.log(JSON.parse(xhr.response));
    } else {
      console.error(`${xhr.status} ${xhr.statusText}`);
    }
  };
};

// idê°€ 1ì¸ postë¥¼ ì·¨ë“
get('https://jsonplaceholder.typicode.com/posts/1');
/*
{
  "userId": 1,
  "id": 1,
  "title": "sunt aut facere ...",
  "body": "quia et suscipit ..."
}
*/
```

## 3. í”„ë¡œë¯¸ìŠ¤ì˜ í›„ì† ì²˜ë¦¬ ë©”ì„œë“œ   
í”„ë¡œë¯¸ìŠ¤ì˜ ë¹„ë™ê¸° ì²˜ë¦¬ ìƒíƒœê°€ ë³€í™”í•˜ë©´ ì´ì— ë”°ë¥¸ í›„ì† ì²˜ë¦¬ë¥¼ í•´ì•¼ í•œë‹¤.   
ì˜ˆë¥¼ ë“¤ì–´, í”„ë¡œë¯¸ìŠ¤ê°€ fulfilled ìƒíƒœê°€ ë˜ë©´ í”„ë¡œë¯¸ìŠ¤ì˜ ì²˜ë¦¬ ê²°ê³¼ë¥¼ ê°€ì§€ê³  ë¬´ì–¸ê°€ë¥¼ í•´ì•¼ í•˜ê³ , í”„ë¡œë¯¸ìŠ¤ê°€ rejected ìƒíƒœê°€ ë˜ë©´ í”„ë¡œë¯¸ìŠ¤ì˜ ì²˜ë¦¬ ê²°ê³¼(ì—ëŸ¬)ë¥¼ ê°€ì§€ê³  ì—ëŸ¬ ì²˜ë¦¬ë¥¼ í•´ì•¼í•œë‹¤.   
ì´ë¥¼ ìœ„í•´ í”„ë¡œë¯¸ìŠ¤ëŠ” í›„ì† ë©”ì„œë“œ then, catch, finallyë¥¼ ì œê³µí•œë‹¤.   
í”„ë¡œë¯¸ìŠ¤ì˜ ë¹„ë™ê¸° ì²˜ë¦¬ ìƒíƒœê°€ ë³€í™”í•˜ë©´ í›„ì† ì²˜ë¦¬ ë©”ì„œë“œì— ì¸ìˆ˜ë¡œ ì „ë‹¬í•œ ì½œë°± í•¨ìˆ˜ê°€ ì„ íƒì ìœ¼ë¡œ í˜¸ì¶œëœë‹¤.   
ì´ë•Œ í›„ì† ì²˜ë¦¬ ë©”ì„œë“œì˜ ì½œë°± í•¨ìˆ˜ì— í”„ë¡œë¯¸ìŠ¤ì˜ ì²˜ë¦¬ ê²°ê³¼ê°€ ì¸ìˆ˜ë¡œ ì „ë‹¬ëœë‹¤.   
    
ëª¨ë“  í›„ì† ì²˜ë¦¬ ë©”ì„œë“œëŠ” í”„ë¡œë¯¸ìŠ¤ë¥¼ ë°˜í™˜í•˜ë©°, ë¹„ë™ê¸°ë¡œ ë™ìž‘í•œë‹¤. í”„ë¡œë¯¸ìŠ¤ì˜ í›„ì† ì²˜ë¦¬ ë©”ì„œë“œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.   
   
### 1) Promise.prototype.then   
then ë©”ì„œë“œëŠ” ë‘ ê°œì˜ ì½œë°± í•¨ìˆ˜ë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬ë°›ëŠ”ë‹¤.   
- ì²« ë²ˆì§¸ ì½œë°± í•¨ìˆ˜ëŠ” í”„ë¡œë¯¸ìŠ¤ê°€ fullfilled ìƒíƒœ(resolve í•¨ìˆ˜ê°€ í˜¸ì¶œëœ ìƒíƒœ)ê°€ ë˜ë©´ í˜¸ì¶œëœë‹¤. ì´ë•Œ ì½œë°± í•¨ìˆ˜ëŠ” í”„ë¡œë¯¸ìŠ¤ì˜ ë¹„ë™ê¸° ì²˜ë¦¬ ê²°ê³¼ë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬ë°›ëŠ”ë‹¤.   
- ë‘ ë²ˆìž¬ ì½œë°± í•¨ìˆ˜ëŠ” í”„ë¡œë¯¸ìŠ¤ê°€ rejected ìƒíƒœ(reject í•¨ìˆ˜ê°€ í˜¸ì¶œëœ ìƒíƒœ)ê°€ ë˜ë©´ í˜¸ì¶œëœë‹¤. ì´ë•Œ ì½œë°± í•¨ìˆ˜ëŠ” í”„ë¡œë¯¸ìŠ¤ì˜ ì—ëŸ¬ë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬ë°›ëŠ”ë‹¤.   

   
### 2) Promise.prototype.catch   
catch ë©”ì„œë“œëŠ” í•œ ê°œì˜ ì½œë°± í•¨ìˆ˜ë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬ë°›ëŠ”ë‹¤.   
catch ë©”ì„œë“œì˜ ì½œë°± í•¨ìˆ˜ëŠ” í”„ë¡œë¯¸ìŠ¤ê°€ rejected ìƒíƒœì¸ ê²½ìš°ë§Œ í˜¸ì¶œëœë‹¤.   
   
### 3) Promise.prototype.finally
finally ë©”ì„œë“œëŠ” í•œ ê°œì˜ ì½œë°± í•¨ìˆ˜ë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬ë°›ëŠ”ë‹¤.   
finally ë©”ì„œë“œì˜ ì½œë°± í•¨ìˆ˜ëŠ” í”„ë¡œë¯¸ìŠ¤ì˜ ì„±ê³µ(fulfilled) ë˜ëŠ” ì‹¤íŒ¨(rejected)ì™€ ìƒê´€ì—†ì´ ë¬´ì¡°ê±´ í•œ ë²ˆ í˜¸ì¶œëœë‹¤.   
finally ë©”ì„œë“œëŠ” í”„ë¡œë¯¸ìŠ¤ì˜ ìƒíƒœì™€ ìƒê´€ì—†ì´ ê³µí†µì ìœ¼ë¡œ ìˆ˜í–‰í•´ì•¼ í•  ì²˜ë¦¬ ë‚´ìš©ì´ ìžˆì„ ë•Œ ìœ ìš©í•˜ë‹¤.  finally ë©”ì„œë“œë„ then/catch ë©”ì„œë“œì™€ ë§ˆì°¬ê°€ì§€ë¡œ ì–¸ì œë‚˜ í”„ë¡œë¯¸ìŠ¤ë¥¼ ë°˜í™˜í•œë‹¤.   
   
## 4. í”„ë¡œë¯¸ìŠ¤ì˜ ì—ëŸ¬ ì²˜ë¦¬   
í”„ë¡œë¯¸ìŠ¤ëŠ” ì½œë°± íŒ¨í„´ê³¼ ë‹¤ë¥´ê²Œ ì—ëŸ¬ë¥¼ ë¬¸ì œì—†ì´ ì²˜ë¦¬í•  ìˆ˜ ìžˆë‹¤.   
   
ë¹„ë™ê¸° ì²˜ë¦¬ì—ì„œ ë°œìƒí•œ ì—ëŸ¬ëŠ” then ë©”ì„œë“œì˜ ë‘ ë²ˆì§¸ ì½œë°± í•¨ìˆ˜ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìžˆë‹¤.   
```js
const wrongUrl = 'https://jsonplaceholder.typicode.com/XXX/1';

// ë¶€ì ì ˆí•œ URLì´ ì§€ì •ë˜ì—ˆê¸° ë•Œë¬¸ì— ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.
promiseGet(wrongUrl).then(
  res => console.log(res),
  err => console.error(err)
); // Error: 404
```
ë¹„ë™ê¸° ì²˜ë¦¬ì—ì„œ ë°œìƒí•œ ì—ëŸ¬ëŠ” í”„ë¡œë¯¸ìŠ¤ì˜ í›„ì† ì²˜ë¦¬ ë©”ì„œë“œ catchë¥¼ ì‚¬ìš©í•´ ì²˜ë¦¬í•  ìˆ˜ë„ ìžˆë‹¤.   
```js
const wrongUrl = 'https://jsonplaceholder.typicode.com/XXX/1';

// ë¶€ì ì ˆí•œ URLì´ ì§€ì •ë˜ì—ˆê¸° ë•Œë¬¸ì— ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.
promiseGet(wrongUrl)
  .then(res => console.log(res))
  .catch(err => console.error(err)); // Error: 404
```

## 5. í”„ë¡œë¯¸ìŠ¤ ì²´ì´ë‹     
ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ìœ„í•œ ì½œë°± íŒ¨í„´ì€ ì½œë°± í—¬ì´ ë°œìƒí•˜ëŠ” ë¬¸ì œê°€ ìžˆì§€ë§Œ í”„ë¡œë¯¸ìŠ¤ëŠ” then, catch, finally í›„ì† ì²˜ë¦¬ ë©”ì„œë“œë¥¼ í†µí•´ ì½œë°± í—¬ì„ í•´ê²°í•œë‹¤.   
```js
const url = 'https://jsonplaceholder.typicode.com';

// idê°€ 1ì¸ postì˜ userIdë¥¼ ì·¨ë“
promiseGet(`${url}/posts/1`)
  // ì·¨ë“í•œ postì˜ userIdë¡œ user ì •ë³´ë¥¼ ì·¨ë“
  .then(({ userId }) => promiseGet(`${url}/users/${userId}`))
  .then(userInfo => console.log(userInfo))
  .catch(err => console.error(err));
```
ìœ„ ì˜ˆì œì—ì„œ then -> then -> catch ìˆœì„œë¡œ í›„ì† ì²˜ë¦¬ ë©”ì„œë“œë¥¼ í˜¸ì¶œí–ˆë‹¤.   
then, catch, finally í›„ì† ì²˜ë¦¬ ë©”ì„œë“œëŠ” ì–¸ì œë‚˜ í”„ë¡œë¯¸ìŠ¤ë¥¼ ë°˜í™˜í•˜ë¯€ë¡œ ì—°ì†ì ìœ¼ë¡œ í˜¸ì¶œí•  ìˆ˜ ìžˆë‹¤.   
ì´ë¥¼ í”„ë¡œë¯¸ìŠ¤ ì²´ì´ë‹ì´ë¼ í•œë‹¤.   
   

## 8. fetch   
fetch í•¨ìˆ˜ëŠ” HTTP ìš”ì²­ ì „ì†¡ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ Web APIë‹¤.    
fetch í•¨ìˆ˜ëŠ” XMLHttpRequest ê°ì²´ë³´ë‹¤ ì‚¬ìš©ë²•ì´ ê°„ë‹¨í•˜ê³  í”„ë¡œë¯¸ìŠ¤ë¥¼ ì§€ì›í•˜ê¸° ë•Œë¬¸ì— ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ìœ„í•œ ì½œë°± íŒ¨í„´ì˜ ë‹¨ì ì—ì„œ ìžìœ ë¡­ë‹¤.   
fetch í•¨ìˆ˜ëŠ” ë¹„êµì  ìµœê·¼ì— ì¶”ê°€ëœ Web APIë¡œì„œ ì¸í„°ë„· ìµìŠ¤í”Œë¡œëŸ¬ë¥¼ ì œì™¸í•œ ëŒ€ë¶€ë¶„ì˜ ëª¨ë˜ ë¸Œë¼ìš°ì €ì—ì„œ ì œê³µí•œë‹¤.   
   
fetch í•¨ìˆ˜ëŠ” HTTP ìš”ì²­ì„ ì „ì†¡í•  URLê³¼ HTTP ìš”ì²­ ë©”ì„œë“œ, HTTP ìš”ì²­ í—¤ë”, íŽ˜ì´ë¡œë“œ ë“±ì„ ì„¤ì •í•œ ê°ì²´ë¥¼ ì „ë‹¬í•œë‹¤.   
   
fetch í•¨ìˆ˜ëŠ” HTTP ì‘ë‹µì„ ë‚˜íƒ€ë‚´ëŠ” Responese ê°ì²´ë¥¼ ëž˜í•‘í•œ Promise ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.   
fetch í•¨ìˆ˜ë¡œ GET ìš”ì²­ì„ ì „ì†¡í•´ë³´ìž.   
fetch í•¨ìˆ˜ì— ì²« ë²ˆì§¸ ì¸ìˆ˜ë¡œHTTP ìš”ì²­ì„ ì „ì†¡í•  URLë§Œ ì „ë‹¬í•˜ë©´ GET ìš”ì²­ì„ ì „ì†¡í•œë‹¤.   
```js
fetch('https://jsonplaceholder.typicode.com/todos/1')
  .then(response => console.log(response));
```
fetch í•¨ìˆ˜ëŠ” HTTP ì‘ë‹µì„ ë‚˜íƒ€ë‚´ëŠ” Response ê°ì²´ë¥¼ ëž˜í•‘í•œ í”„ë¡œë¯¸ìŠ¤ë¥¼ ë°˜í™˜í•˜ë¯€ë¡œ í›„ì† ì²˜ë¦¬ ë©”ì„œë“œ thenì„ í†µí•´ í”„ë¡œë¯¸ìŠ¤ê°€ resolve í•œ Response ê°ì²´ë¥¼ ì „ë‹¬ë°›ì„ ìˆ˜ ìžˆë‹¤.   
Response ê°ì²´ëŠ” HTTPì‘ë‹µì„ ë‚˜íƒ€ë‚´ëŠ” ë‹¤ì–‘í•œ í”„ë¡œí¼í‹°ë¥¼ ì œê³µí•œë‹¤.   
            
>1. GET ìš”ì²­
```js
const wrongUrl = 'https://jsonplaceholder.typicode.com/XXX/1';

// ë¶€ì ì ˆí•œ URLì´ ì§€ì •ë˜ì—ˆê¸° ë•Œë¬¸ì— 404 Not Found ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.
fetch(wrongUrl)
  // responseëŠ” HTTP ì‘ë‹µì„ ë‚˜íƒ€ë‚´ëŠ” Response ê°ì²´ë‹¤.
  .then(response => {
    if (!response.ok) throw new Error(response.statusText);
    return response.json();
  })
  .then(todo => console.log(todo))
  .catch(err => console.error(err));
```

>2. POST ìš”ì²­
```js
const request = {
  get(url) {
    return fetch(url);
  },
  post(url, payload) {
    return fetch(url, {
      method: 'POST',
      headers: { 'content-Type': 'application/json' },
      body: JSON.stringify(payload)
    });
  },
  patch(url, payload) {
    return fetch(url, {
      method: 'PATCH',
      headers: { 'content-Type': 'application/json' },
      body: JSON.stringify(payload)
    });
  },
  delete(url) {
    return fetch(url, { method: 'DELETE' });
  }
};
```

>3. PATCH ìš”ì²­
```js
request.get('https://jsonplaceholder.typicode.com/todos/1')
  .then(response => {
    if (!response.ok) throw new Error(response.statusText);
    return response.json();
  })
  .then(todos => console.log(todos))
  .catch(err => console.error(err));
// {userId: 1, id: 1, title: "delectus aut autem", completed: false}
```

>4. DELETE ìš”ì²­
```js
request.post('https://jsonplaceholder.typicode.com/todos', {
  userId: 1,
  title: 'JavaScript',
  completed: false
}).then(response => {
    if (!response.ok) throw new Error(response.statusText);
    return response.json();
  })
  .then(todos => console.log(todos))
  .catch(err => console.error(err));
// {userId: 1, title: "JavaScript", completed: false, id: 201}
```
