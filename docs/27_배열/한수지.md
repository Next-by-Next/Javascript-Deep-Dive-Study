## 27장. ✨ 배열

### 📌 27-1. 배열이란?

배열은 `여러 개의 값을 순차적으로 나열한 자료구조`이다.

배열이 가지고 있는 값을 `요소`(element)라고 부르며, 자바스크립트의 모든 값은 배열의 요소가 될 수 있다.

배열의 요소는 배열에서 자신의 위치를 나타내는 0이상의 `인덱스`(index)를 갖는다.

배열은 기본적으로 길이를 나타내는 `length 프로퍼티`를 가진다.

인덱스와 length를 가지고 있기 때문에 값의 순서를 가지며, 순회가 가능하다는 특징이 있다.

---

### 📌 27-2. 자바스크립트 배열은 배열이 아니다.

자료구조에서 말하는 배열과 자바스크립트의 배열은 차이가 있다.

흔히, 자료구조에서 말하는 배열은 밀집 배열이다.

- 밀집 배열: 동일한 크기의 메모리 공간이 빈틈없이 연속적으로 나열된 자료구조
  - 배열의 요소는 하나의 데이터 타입으로 통일됨
  - 배열의 요소들이 서로 연속적으로 인접해 있음
  - 각 요소들이 동일한 데이터 크기를 가짐

> **자바스크립트의 배열은 희소 배열을 허용**한다.

즉, 배열의 요소가 연속적으로 이어져 있지 않아도 되며(요소의 값이 존재하지 않는 경우) 배열의 요소마다 메모리 공간 또한 동일한 크기가 아닐 수 있다.(요소마다 데이터 타입이 달라도 허용)

이처럼 자바스크립트 배열은 일반적인 배열의 동작을 흉내낸 특수한 객체이다.

자바스크립트 배열은 해시 테이블로 구현된 객체이다.

일반적인 배열보다 인덱스로 요소에 접근시 성능적으로는 느리다는 단점이 존재하지만,
**요소를 삽입하거나 삭제하는 경우에는 일반적인 배열보다 빠른 성능**을 보인다.

모던 자바스크립트 엔진은 인덱스로 요소에 접근시 성능적으로는 느리다는 단점을 보완하기 위해 일반 객체와 구별하여 배열처럼 동작하도록 최적화를 구현했다.

---

### 📌 27-3. length 프로퍼티와 희소 배열

> length 프로퍼티는 요소의 개수(배열의 길이를 나타내는 0이상의 정수)를 값으로 갖는다.

빈 배열이 아닌 경우 가장 큰 인덱스에 + 1 을 한 것이 해당 배열의 length와 같다.

```js
// 가장 큰 인덱스는 1
const arr = [1, 2];

// 가장 큰 인덱스에 + 1을 한 값은 해당 배열의 length 이다.
arr.length === 2; // true
```

length프로퍼티의 값은 `배열에 요소를 추가하거나 삭제하면 자동 갱신`된다.

length에 직접적인 값 할당을 통해 원본 배열을 변경할 수 있다.

주의할 점은 현재 length보다 큰 값을 할당하는 경우 length의 값은 늘어나지만,
실제 배열에는 비어있는 값이 들어가게 된다.

```js
const arr = [1, 2, 3];

arr.length = 2;

console.log(arr); // [1, 2]

// 배열의 길이보다 큰 값을 할당할 경우
arr.length = 3;

// 희소배열이 됨
console.log(arr); // [1, 2, 비어 있음]
```

희소 배열은 length와 배열 요소의 개수가 일치하지 않으며, length는 희소배열의 실제 요소 개수보다 언제나 크다는 특징을 가진다.

배열을 생성할 경우, **희소배열을 생성하지 않도록 주의가 필요**하다.

(배열에는 같은 타입의 요소를 연속적으로 위치시키는 것이 최선의 방법)

---

### 📌 27-4. 배열 생성

#### 🔎 배열 리터럴

> 배열 리터럴은 가장 일반적으로 배열을 생성하는 방법이며, `[]` 대괄호 표기법을 사용한다.

만약 배열 리터럴에서 요소를 생략하면 희소배열이 생성된다.

```js
const arr = []; // []
const arr2 = [1, 2]; // [1, 2]
const arr3 = ["a", , "b"]; // ['a', empty,'b']
```

#### 🔎 Array 생성자 함수

> `new Array()` 생성자 함수는 전도된 인수의 개수에 따라 다르게 동작하며 배열을 생성한다.

- 전달된 인수가 1개의 숫자인 경우 : length 프로퍼티 값이 인수인 배열을 생성

```js
// 값이 비어있는 희소배열이 생성된다.
new Array(1); // [empty * 1]
new Array(10); // [empty * 10]
```

- 전달된 인수가 없는 경우 : 빈 배열을 생성한다.

```js
new Array(); // []
new Array(0); // []
```

- 전달된 인수가 2개 이상이거나 숫자가 아닌 경우: 인수를 요소로 갖는 배열을 생성한다.

```js
new Array(1, 2); // [1, 2]
new Array("a", "b"); // ['a', 'b']
new Array(1, "a"); // [1, 'a']
```

추가적으로 Array 생성자 함수는 `new` 연산자와 함께 호출하지 않아도 배열을 생성하는 생성자 함수로서 동작한다.

(생성자 함수 내부에서 `new.target`을 확인하기 때문)

#### 🔎 Array.of

> `Array.of()`메서드는 전달된 인수를 요소로 갖는 배열을 생성한다.

```js
// 전달된 인수가 1개이고 숫자여도 인수를 요소로 갖는 배열을 생성
Array.of(1); // [1]

Array.of(1, 2, 3); // [1,2,3]

Array.of("abc"); // ['abc']
```

#### 🔎 Array.from

> `Array.from()` 메서드는 유사배열 객체 or 이터러블 객체를 인수로 전달받아 배열로 변환하여 반환한다.

- 유사배열 객체: 배열처럼 인덱스로 프로퍼티 값에 접근이 가능하며 `length 프로퍼티`를 갖는 객체를 말한다.

- 이터러블 객체: `Symbol.iterator` 메서드를 구현하여 `for ... of 문으로 순회 가능`하며, 스프레드 문법과 배열 디스트럭처링 할당의 대상으로 사용할 수 있는 객체를 말한다.

첫번째 인수에는 유사배열 객체 or 이터러블 객체가 들어가며, 두번째 인수에는 콜백함수를 통해 값을 만들면서 요소를 채울 수 있다.

```js
Array.from({ length: 3 }, (_, index) => {
	i;
}); // [0, 1, 2]
```

---

### 📌 27-5. 배열 요소의 참조

배열의 요소를 참조할 때에는 대괄호(`[]`)표기법을 사용한다.

대괄호 안에는 인덱스가가 와야하며, 정수로 평가되는 표현식이라면 인덱스 대신 사용할 수 있다.
(객체의 프러티 키와 같은 역할을 수행)

존재하지 않는 요소에 접근하는 경우 undefined가 반환된다.

```js
const arr = ["a", "b"];
const index = 0;

console.log(arr[0]); // 'a'
console.log(arr[1]); // 'b'
console.log(arr[index]); // 'a'
console.log(arr[2]); // undefined
```

---
