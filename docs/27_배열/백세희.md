# 27. 배열

## 27.1 배열이란?

`배열`: 여러 개의 값을 순차적으로 나역한 자료 구조

- 배열 생성 중 하나의 예: 배열 리터럴
  ```js
  const arr = ["apple", "banana", "orange"];
  ```
- 요소: 배열이 가지고 있는 값
  > 자바스크립트의 모든 값을 배열의 요소가 될 수 있음
- 인덱스: 배열의 요소가 배열에서 자신의 위치를 나타내는 0이상의 정수
  ```js
  arr[1]; // -> 'banana'
  ```
- length 프로퍼티: 요소의 개수, 즉 배열의 길이를 나타냄
  > 배열의 순회: 인덱스와 length 프로퍼티로 for 문을 통해 순차적으로 요소에 접근할 수 있음
- 배열은 객체 타입
  > 값의 순서와 length 프로퍼티가 있다는 점에서 일반 객체와 구분함

배열의 장점: 처음부터 순차적 또는 역순으로 요소에 접근할 수도 있으며, 특정 위치부터 순차적으로 요소에 접근할 수도 있음

## 27.2 자바스크립트 배열은 배열이 아니다

- 자료구조 (`밀집 배열`)
  - 동일한 크그의 메모리 공간
  - 빈틈없이 연속적으로 나열
  - 장점: 인덱스로 요소에 빠르게 접근할 수 있음
  - 단점: 요소를 삽입 또는 삭제하는 경우에는 효율적이지 않음
- 자바스크립트 (`희소 배열`)
  - 배열 요소를 위한 각각 동일하지 않은 메모리 공간
  - 연속적으로 이어져 있지 않을 수도 있는 나열
  - 장점: 요소를 삽입 또는 삭제하는 경우에는 일반적인 배열보다 빠른 성능을 기대할 수 있음
  - 단점: 해시 테이블로 구현된 객체이므로 인덱스로 요소에 접근하는 경우 일반적이 배열보다 성능적인 면에서 느림
- 자바스크립트의 배열은 일반적인 배열의 동작을 흉내 낸 특수한 객체
  - 프로퍼티 키: 인덱스를 나타내는 문자열
  - 프로퍼티 값: 배열의 요소
  - length 프로퍼티를 갖는 특수한 객체
    > 자바스크립트 배열은 인덱스로 접근하는 경우의 성능 대신 배열 요소를 삽입 또는 삭제하는 경우의 성능을 선택한 것임

## 27.3 length 프로퍼티와 희소 배열

- length 프로퍼티: 요소의 개수, 즉 배열의 길이를 나타내는 0이상의 정수를 값으로 가침
  - 빈 배열일 경우 0
  - 빈 배열이 아닐 경우 가장 큰 인덱스에 +1
- length 프로퍼티의 값은 배열에 요소를 추가하거나 삭제하면 자동 갱신됨
- length 프로퍼티 값은 요소의 개수, 즉 배열의 길이를 바탕으로 결정되지만 임의의 숫자 값을 명시적으로 할당할 수도 있음

  - 현재 length 프로퍼티 값보다 작은 숫자 값을 할당하면 배열의 길이가 줄어듦
  - 현재 length 프로퍼티 값보다 큰 숫자 값을 할당하면 length 프로퍼티 값은 변경되지만 실제로 배열의 길이가 늘어나지 않음
    > 희소 배열이 발생할 수 있음

- 희소 배열: 배열의 요소가 연속적으로 위치하지 않고 일부가 비어 있는 배열

```js
// 희소 배열
const sparse = [, 2, , 4];

//  희소 배열의 length 프로퍼티 값은 요소의 개수와 일치하지 않음
console.log(sparse.length); // 4
console.log(sparse); // [empty, 2, empty, 4]

// 배열 sparse에는 인덱스가 0, 2인 요소가 존재하지 않음
console.log(Object.getOwnPropertyDescriptors(sparse));
/*
{
   '1': {value: 2, writable: true, enumerable: true, configurable: true}
   '3' : {value: 4, writable: true, enumerable: true, configurable: true}
   length : {value: 4, writable: true, enumerable: false, configurable: false}
}
*/
```

- length와 배열 요소의 개수가 일치하지 않음
  > 희소 배열의 length는 희소 배열의 실제 요소 개수보다 언제나 큼

> 배열에는 같은 타입의 요소를 연속적으로 위치시키는 것이 최선임

## 27.4 배열 생성

### 27.4.1 배열 리터럴

0개 이상의 요소를 쉼표로 구분하여 대괄호([])로 묶음

```js
const arr = [1, 2, 3];
```

### 27.4.2 Array 생성자 함수

Array 생성자 함수를 통해 배열을 생성

> Array 생성자 함수는 전달된 인수의 개수에 따라 다르게 동작함

- 전달된 인수가 1개이고 숫자인 경우 length 프로퍼티 값이 인수인 배열을 생성함
- 전달된 인수가 범위를 벗어나면 RangeError가 발생함
- 전달된 인수가 없는 경우 빈 배열을 생성함
  > 배열 리터럴 []과 같음
- 전달된 인수가 2개 이상이거나 숫자가 아닌 경우 인수를 요소로 갖는 배열을 생성함
  > 전달된 인수가 1개이고 숫자인 경우 배열을 생성하지 않음

### 27.4.3 Array.of

전달된 인수를 요소로 갖는 배열을 생성함

Array 생성자 함수와 다르게 전달된 인수가 1개이고 숫자이더라도 인수를 요소로 갖는 배열을 생성함

### 27.4.4 Array.from

유사 배열 객체 또는 이터러블 객체를 인수로 전달받아 배열로 변환하여 반환함

두 번째 인수로 전달한 콜백 함수에 첫 번째 인수에 의해 생성된 배열의 요소값과 인덱스를 순차적으로 전달하면서 호출하고, 콜백 함수의 반환값으로 구성된 배열을 반환함

```js
// 유사 배열 객체를 반환하여 배열을 생성함
Array.from({ length: 2, 0: "a", 1: "b" });  // -> ['a', 'b']
// 이터러블을 변환하여 배열을 생성함
Array.from('Hello')l    // -> ['H', 'e', 'l', 'l', 'o']
```

## 27.5 배열 요소의 참조

- `대괄호([])` 표기법: 대괄호 안에 인덱스를 넣어 배열의 요소를 참조할 때 사용함
  - 존재하지 않는 요소, 희소 배열의 존재하지 않는 요소를 참조하면 undefined가 반환됨
