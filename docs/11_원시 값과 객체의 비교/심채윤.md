# 11. 원시 값과 객체의 비교

<p align='center'>
📕 11장 11.1 ~ 11.2
</p><br />

## 시작하기 전에

- 데이터 타입은 크게 **원시 타입**과 **객체 타입**으로 구분

| 원시 타입 | 객체 타입 |
| --- | --- |
| 변경 불가능 | 변경 가능 |
| 변수 할당 시 실제 값 저장 | 변수 할당 시 참조값 저장 |
| 다른 변수 할당 시 원시 값이 복사되어 전달<br />=> `값에 의한 전달` | 다른 변수 할당 시 참조 값이 복사되어 전달<br />=> `참조에 의한 전달` |

<br /><br />

## 11.1 원시 값

### 변경 불가능한 값

원시 타입의 값, 즉 원시 값은 변경 불가능한 값이다. 이 '변경 불가능'하다는 것은 변수가 아니라 **값**에 대한 말이다.

변수는 언제든지 재할당을 통해 변수 값을 교체할 수 있지만 원시 값 자체를 변경할 수는 없다. 변수의 상대 개념인 상수는 재할당이 금지되어있다.

```js
const o = {};

o.a = 1;
console.log(o);
```

```js
> { a : 1 }
```

원시 값을 할당한 변수에 새로운 원시 값을 재할당하면 메모리 공간의 원시 값 변경이 아닌 새로운 메모리 공간을 확보하고 재할당한 원시 값을 저장한 후, 새롭게 재할당한다.

![원시 값은 변경 불가능](image.png)

변수에 할당된 원시 값이 변경 불가능한 값이기 때문에 메모리 공간의 주소가 바뀐 것이다. 만약 원시 값이 변경 가능한 경우 아래처럼 주소가 바뀌지 않는다.

![만약 변경 가능하다면?](image-1.png)

불변성을 갖는 원시 값을 할당한 변수는 재할당 이외에 변수 값을 변경할 수 있는 방법이 없다. <br /> <br />

### 문자열과 불변성

문자열은 0개 이상의 문자로 이루어진 집합을 말하며, 1개의 문자는 2바이트의 메모리 공간에 저장된다. 즉, 'a'는 2바이트, 'hello'는 10바이트가 된다.

```js
var str1 = ''; // 0byte
var str2 = 'Hello'; // 10byte
```

C언어에서는 문자열을 문자의 배열로 처리하고 자바에서는 문자열을 String 객체로 처리한다.

문자열은 자바스크립트에서 유사 배열 객체이자 이터러블이므로 배열과 유사하게 각 문자에 접근할 수 있다. (유사 배열 객체란 마치 배열처럼 인덱스로 값에 접근할 수 있는 것)

```js
var str = 'string';
console.log(str[0]);
```

```js
> 's'
```

<br />

### 값에 의한 전달

```js
var score = 80;
var copy = score;

console.log(score); // 80
console.log(copy); // 80

score = 100;

console.log(score); // 100
console.log(copy); // 80
```

`값에 의한 전달`은 위 코드처럼 변수에 원시 값을 갖는 변수를 할당하면 할당 받는 변수에는 할당 되는 변수의 원시값이 **복사**되어 할당되는 것을 의미한다.

위 코드에서는 score과 copy는 80의 동일한 수를 가지고 있지만, 다른 메모리 공간에 저장된 별개의 값이다.

![score과 copy](image-2.png)

이처럼 값에 의한 전달도 사실은 값을 전달하는 것이 아니라 메모리 주소를 전달한다는 것을 알 수 있다. 단, 전달된 메모리 주소를 통해 메모리 공간에 접근하면 값을 참조할 수 있다.

<br /><br />

## 11.2 객체

### 변경 가능한 값

객체 타입의 값은 변경 가능하다.

```js
var person = {
  name: 'Lee',
};
```

객체를 할당한 변수가 기억하는 메모리 주소를 통해 메모리 공간에 접근하면 **참조 값**에 접근할 수 있다. 참조 값은 생성된 객체가 저장된 메모리 공간의 주소 그 자체이다.

![객체 할당](image-3.png)

원시 값은 변경 불간능한 값이므로 재할당 외에는 방법이 없지만, 객체는 재할당 없이 동적 추가, 갱신, 삭제 등 직접 변경할 수 있다.

```js
var person = {
  name: 'Lee',
};

person.name = 'Kim';
person.address = 'Seoul';
delete person.name;

console.log(person);
```

```js
> { address: 'Seoul' }
```

<br />

### 참조에 의한 전달

```js
var person = {
  name: 'Lee',
};

var copy = person;
```

`참조에 의한 전달`이란, 위처럼 객체를 가리키는 변수를 다른 변수에 할당하면 원본의 참조값이 복사되어 전달하는 것이다.

![참조에 의한 전달](image-4.png)

위를 살펴보면 두 개의 식별자가 하나의 객체를 공유한다는 것을 알 수 있다. 따라서 원본 또는 사본 중 어느 한쪽에서 객체를 변경하면 서로 영향을 주고 받게 된다.

```js
var person = {
  name: 'Lee',
};

var copy = person;

console.log(copy === person); // true

copy.name = 'Kim';
person.address = 'Seoul';

console.log(person); // { name: 'Kim', address: 'Seoul' }
console.log(copy); // { name: 'Kim', address: 'Seoul' }
```

'값에 의한 전달'과 '참조에 의한 전달'은 식별자가 기억하는 메모리 공간에 저장되어있는 값을 복사, 전달한다는 면에서 동일하고, 변수에 저장되어있는 값이 원시 값 또는 참조 값에 따라 차이가 있을 뿐이다.

자바스크립트에서는 '참조에 의한 전달' 없이 '값에 의한 전달'만 존재한다고 말할 수 있다.
